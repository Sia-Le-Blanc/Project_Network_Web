RA ê²Œì„ í™ˆí˜ì´ì§€ - ë°±ì—”ë“œ í”„ë¡œì íŠ¸ êµ¬ì¡°
=============================================

ğŸ“ ì¶”ì²œ ê¸°ìˆ  ìŠ¤íƒ
-----------------

Option 1: Node.js (ë¹ ë¥¸ ê°œë°œ, JavaScript í†µì¼)
â”œâ”€ Runtime: Node.js 20.x
â”œâ”€ Framework: Express.js 4.x
â”œâ”€ ORM: Prisma or Sequelize
â”œâ”€ Auth: Passport.js + JWT
â””â”€ Validation: Joi or Zod

Option 2: Spring Boot (ì—”í„°í”„ë¼ì´ì¦ˆê¸‰, ì•ˆì •ì„±)
â”œâ”€ Java: 17+
â”œâ”€ Framework: Spring Boot 3.x
â”œâ”€ ORM: Spring Data JPA
â”œâ”€ Auth: Spring Security + JWT
â””â”€ Validation: Hibernate Validator

Option 3: Python (ê°„í¸í•œ ê°œë°œ)
â”œâ”€ Runtime: Python 3.11+
â”œâ”€ Framework: FastAPI
â”œâ”€ ORM: SQLAlchemy
â”œâ”€ Auth: FastAPI-JWT-Auth
â””â”€ Validation: Pydantic

ê¶Œì¥: Node.js + Express (í”„ë¡ íŠ¸ì—”ë“œê°€ JavaScriptì´ë¯€ë¡œ í†µì¼ì„±)


ğŸ“ Node.js + Express í”„ë¡œì íŠ¸ êµ¬ì¡°
==================================

ra-backend/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/                  # ì„¤ì • íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ database.js          # DB ì—°ê²° ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ jwt.js               # JWT ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ redis.js             # Redis ì„¤ì •
â”‚   â”‚   â””â”€â”€ s3.js                # S3/íŒŒì¼ ì €ì¥ì†Œ ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/             # ì»¨íŠ¸ë¡¤ëŸ¬ (ìš”ì²­ ì²˜ë¦¬)
â”‚   â”‚   â”œâ”€â”€ authController.js    # ì¸ì¦ ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ userController.js    # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ newsController.js    # ì†Œì‹/ê³µì§€
â”‚   â”‚   â”œâ”€â”€ communityController.js  # ì»¤ë®¤ë‹ˆí‹°
â”‚   â”‚   â”œâ”€â”€ gameController.js    # ê²Œì„ ì •ë³´
â”‚   â”‚   â””â”€â”€ downloadController.js   # ë‹¤ìš´ë¡œë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ authService.js
â”‚   â”‚   â”œâ”€â”€ userService.js
â”‚   â”‚   â”œâ”€â”€ newsService.js
â”‚   â”‚   â”œâ”€â”€ communityService.js
â”‚   â”‚   â”œâ”€â”€ gameService.js
â”‚   â”‚   â”œâ”€â”€ emailService.js      # ì´ë©”ì¼ ë°œì†¡
â”‚   â”‚   â””â”€â”€ fileService.js       # íŒŒì¼ ì—…ë¡œë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                  # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”œâ”€â”€ News.js
â”‚   â”‚   â”œâ”€â”€ Post.js
â”‚   â”‚   â”œâ”€â”€ Comment.js
â”‚   â”‚   â””â”€â”€ Download.js
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                  # ë¼ìš°íŠ¸ ì •ì˜
â”‚   â”‚   â”œâ”€â”€ authRoutes.js        # /api/auth/*
â”‚   â”‚   â”œâ”€â”€ userRoutes.js        # /api/user/*
â”‚   â”‚   â”œâ”€â”€ newsRoutes.js        # /api/news/*
â”‚   â”‚   â”œâ”€â”€ communityRoutes.js   # /api/community/*
â”‚   â”‚   â”œâ”€â”€ gameRoutes.js        # /api/game/*
â”‚   â”‚   â””â”€â”€ downloadRoutes.js    # /api/download/*
â”‚   â”‚
â”‚   â”œâ”€â”€ middlewares/             # ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ auth.js              # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ validate.js          # ìš”ì²­ ê²€ì¦
â”‚   â”‚   â”œâ”€â”€ errorHandler.js      # ì—ëŸ¬ í•¸ë“¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ rateLimit.js         # Rate Limiting
â”‚   â”‚   â””â”€â”€ cors.js              # CORS ì„¤ì •
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ jwt.js               # JWT ìƒì„±/ê²€ì¦
â”‚   â”‚   â”œâ”€â”€ bcrypt.js            # ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
â”‚   â”‚   â”œâ”€â”€ validators.js        # ê²€ì¦ í•¨ìˆ˜ë“¤
â”‚   â”‚   â””â”€â”€ logger.js            # ë¡œê¹…
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                      # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ migrations/          # ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”‚   â””â”€â”€ seeders/             # ì´ˆê¸° ë°ì´í„°
â”‚   â”‚
â”‚   â””â”€â”€ app.js                   # Express ì•± ì„¤ì •
â”‚
â”œâ”€â”€ tests/                       # í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”‚
â”œâ”€â”€ uploads/                     # ì—…ë¡œë“œ íŒŒì¼ ì„ì‹œ ì €ì¥
â”‚
â”œâ”€â”€ logs/                        # ë¡œê·¸ íŒŒì¼
â”‚
â”œâ”€â”€ .env                         # í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ .env.example                 # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ README.md
â””â”€â”€ server.js                    # ì„œë²„ ì§„ì…ì 


ğŸ“„ ì£¼ìš” íŒŒì¼ ì˜ˆì‹œ ì½”ë“œ
======================

1. server.js (ì§„ì…ì )
----------------------
const app = require('./src/app');
const config = require('./src/config/database');

const PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
});


2. src/app.js (Express ì„¤ì •)
-----------------------------
const express = require('express');
const cors = require('cors');
const helmet = require('helmet');
const rateLimit = require('express-rate-limit');

// ë¼ìš°íŠ¸ ì„í¬íŠ¸
const authRoutes = require('./routes/authRoutes');
const userRoutes = require('./routes/userRoutes');
const newsRoutes = require('./routes/newsRoutes');
const communityRoutes = require('./routes/communityRoutes');
const gameRoutes = require('./routes/gameRoutes');
const downloadRoutes = require('./routes/downloadRoutes');

// ë¯¸ë“¤ì›¨ì–´
const errorHandler = require('./middlewares/errorHandler');

const app = express();

// ê¸°ë³¸ ë¯¸ë“¤ì›¨ì–´
app.use(helmet());
app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Rate Limiting
const limiter = rateLimit({
    windowMs: 15 * 60 * 1000, // 15ë¶„
    max: 100 // ìµœëŒ€ 100 ìš”ì²­
});
app.use('/api/', limiter);

// ë¼ìš°íŠ¸ ë“±ë¡
app.use('/api/auth', authRoutes);
app.use('/api/user', userRoutes);
app.use('/api/news', newsRoutes);
app.use('/api/community', communityRoutes);
app.use('/api/game', gameRoutes);
app.use('/api/download', downloadRoutes);

// ì—ëŸ¬ í•¸ë“¤ëŸ¬
app.use(errorHandler);

module.exports = app;


3. src/routes/authRoutes.js
----------------------------
const express = require('express');
const router = express.Router();
const authController = require('../controllers/authController');
const { validateLogin, validateSignup } = require('../middlewares/validate');

// POST /api/auth/login
router.post('/login', validateLogin, authController.login);

// POST /api/auth/signup
router.post('/signup', validateSignup, authController.signup);

// POST /api/auth/refresh
router.post('/refresh', authController.refreshToken);

// POST /api/auth/logout
router.post('/logout', authController.logout);

// GET /api/auth/social/:provider
router.get('/social/:provider', authController.socialLogin);

module.exports = router;


4. src/controllers/authController.js
-------------------------------------
const authService = require('../services/authService');

class AuthController {
    async login(req, res, next) {
        try {
            const { email, password, remember } = req.body;
            
            const result = await authService.login(email, password, remember);
            
            res.status(200).json({
                success: true,
                data: result,
                message: 'ë¡œê·¸ì¸ ì„±ê³µ'
            });
        } catch (error) {
            next(error);
        }
    }
    
    async signup(req, res, next) {
        try {
            const userData = req.body;
            
            const result = await authService.signup(userData);
            
            res.status(201).json({
                success: true,
                data: result,
                message: 'íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.'
            });
        } catch (error) {
            next(error);
        }
    }
    
    async refreshToken(req, res, next) {
        try {
            const { refreshToken } = req.body;
            
            const result = await authService.refreshToken(refreshToken);
            
            res.status(200).json({
                success: true,
                data: result
            });
        } catch (error) {
            next(error);
        }
    }
    
    async logout(req, res, next) {
        try {
            const { refreshToken } = req.body;
            
            await authService.logout(refreshToken);
            
            res.status(200).json({
                success: true,
                message: 'ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.'
            });
        } catch (error) {
            next(error);
        }
    }
    
    async socialLogin(req, res, next) {
        // OAuth ë¡œì§ êµ¬í˜„
    }
}

module.exports = new AuthController();


5. src/services/authService.js
-------------------------------
const bcrypt = require('bcrypt');
const jwt = require('../utils/jwt');
const User = require('../models/User');
const redisClient = require('../config/redis');

class AuthService {
    async login(email, password, remember) {
        // ì‚¬ìš©ì ì¡°íšŒ
        const user = await User.findByEmail(email);
        if (!user) {
            throw new Error('ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }
        
        // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
        const isValidPassword = await bcrypt.compare(password, user.password);
        if (!isValidPassword) {
            throw new Error('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        }
        
        // í† í° ìƒì„±
        const accessToken = jwt.generateAccessToken({ userId: user.id });
        const refreshToken = jwt.generateRefreshToken({ userId: user.id });
        
        // Refresh Tokenì„ Redisì— ì €ì¥
        await redisClient.set(
            `refresh_token:${user.id}`,
            refreshToken,
            'EX',
            remember ? 30 * 24 * 60 * 60 : 7 * 24 * 60 * 60 // 30ì¼ or 7ì¼
        );
        
        return {
            accessToken,
            refreshToken,
            user: {
                id: user.id,
                username: user.username,
                email: user.email,
                avatar: user.avatar
            }
        };
    }
    
    async signup(userData) {
        // ì¤‘ë³µ ì²´í¬
        const existingUser = await User.findByEmail(userData.email);
        if (existingUser) {
            throw new Error('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.');
        }
        
        // ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”
        const hashedPassword = await bcrypt.hash(userData.password, 10);
        
        // ì‚¬ìš©ì ìƒì„±
        const newUser = await User.create({
            ...userData,
            password: hashedPassword
        });
        
        // í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ (ë¹„ë™ê¸°)
        // emailService.sendWelcomeEmail(newUser.email);
        
        return {
            userId: newUser.id,
            username: newUser.username,
            email: newUser.email
        };
    }
    
    async refreshToken(refreshToken) {
        // í† í° ê²€ì¦ ë° ìƒˆ í† í° ë°œê¸‰
        const decoded = jwt.verifyRefreshToken(refreshToken);
        
        // Redisì—ì„œ í™•ì¸
        const storedToken = await redisClient.get(`refresh_token:${decoded.userId}`);
        if (storedToken !== refreshToken) {
            throw new Error('ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤.');
        }
        
        // ìƒˆ Access Token ë°œê¸‰
        const newAccessToken = jwt.generateAccessToken({ userId: decoded.userId });
        
        return {
            accessToken: newAccessToken
        };
    }
    
    async logout(refreshToken) {
        const decoded = jwt.verifyRefreshToken(refreshToken);
        
        // Redisì—ì„œ Refresh Token ì‚­ì œ
        await redisClient.del(`refresh_token:${decoded.userId}`);
    }
}

module.exports = new AuthService();


6. src/middlewares/auth.js (ì¸ì¦ ë¯¸ë“¤ì›¨ì–´)
------------------------------------------
const jwt = require('../utils/jwt');

function authenticate(req, res, next) {
    try {
        const authHeader = req.headers.authorization;
        
        if (!authHeader || !authHeader.startsWith('Bearer ')) {
            return res.status(401).json({
                success: false,
                error: {
                    code: 'NO_TOKEN',
                    message: 'ì¸ì¦ í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤.'
                }
            });
        }
        
        const token = authHeader.substring(7);
        const decoded = jwt.verifyAccessToken(token);
        
        req.user = decoded; // { userId: ... }
        next();
    } catch (error) {
        return res.status(401).json({
            success: false,
            error: {
                code: 'INVALID_TOKEN',
                message: 'ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤.'
            }
        });
    }
}

module.exports = authenticate;


7. .env (í™˜ê²½ ë³€ìˆ˜)
-------------------
# Server
NODE_ENV=development
PORT=3000

# Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ra_game
DB_USER=postgres
DB_PASSWORD=your_password

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379

# JWT
JWT_ACCESS_SECRET=your_access_token_secret_here
JWT_REFRESH_SECRET=your_refresh_token_secret_here
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# AWS S3
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret
AWS_S3_BUCKET=ra-game-files
AWS_REGION=ap-northeast-2

# Email
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password

# OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
FACEBOOK_CLIENT_ID=your_facebook_client_id
FACEBOOK_CLIENT_SECRET=your_facebook_client_secret

# CORS
ALLOWED_ORIGINS=http://localhost:8080,https://ra-game.com


8. package.json
---------------
{
  "name": "ra-backend",
  "version": "1.0.0",
  "description": "RA Game Homepage Backend",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "jest",
    "migrate": "sequelize-cli db:migrate",
    "seed": "sequelize-cli db:seed:all"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "helmet": "^7.1.0",
    "dotenv": "^16.3.1",
    "bcrypt": "^5.1.1",
    "jsonwebtoken": "^9.0.2",
    "pg": "^8.11.3",
    "sequelize": "^6.35.0",
    "redis": "^4.6.11",
    "express-rate-limit": "^7.1.5",
    "joi": "^17.11.0",
    "multer": "^1.4.5-lts.1",
    "aws-sdk": "^2.1501.0",
    "nodemailer": "^6.9.7",
    "passport": "^0.7.0",
    "passport-google-oauth20": "^2.0.0",
    "passport-facebook": "^3.0.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.2",
    "jest": "^29.7.0",
    "supertest": "^6.3.3",
    "sequelize-cli": "^6.6.2"
  }
}


ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (PostgreSQL)
===================================

-- Users í…Œì´ë¸”
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    birthdate DATE,
    region VARCHAR(10),
    marketing_consent BOOLEAN DEFAULT false,
    avatar_url VARCHAR(255),
    level INTEGER DEFAULT 1,
    class VARCHAR(50),
    guild_id INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP
);

-- News í…Œì´ë¸”
CREATE TABLE news (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    category VARCHAR(50) NOT NULL,
    excerpt TEXT,
    content TEXT NOT NULL,
    thumbnail_url VARCHAR(255),
    author VARCHAR(100),
    views INTEGER DEFAULT 0,
    featured BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Posts í…Œì´ë¸” (ì»¤ë®¤ë‹ˆí‹°)
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    category VARCHAR(50) NOT NULL,
    views INTEGER DEFAULT 0,
    likes INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Comments í…Œì´ë¸”
CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    post_id INTEGER REFERENCES posts(id),
    user_id INTEGER REFERENCES users(id),
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Tags í…Œì´ë¸”
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL
);

-- Post_Tags ì—°ê²° í…Œì´ë¸”
CREATE TABLE post_tags (
    post_id INTEGER REFERENCES posts(id),
    tag_id INTEGER REFERENCES tags(id),
    PRIMARY KEY (post_id, tag_id)
);


ğŸš€ ë°°í¬ êµ¬ì„±
============

1. í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬
   - Vercel / Netlify (ì •ì  í˜¸ìŠ¤íŒ…)
   - Nginx + CDN (ì»¤ìŠ¤í…€)

2. ë°±ì—”ë“œ ë°°í¬
   - AWS EC2 + PM2
   - AWS Elastic Beanstalk
   - Docker + Kubernetes
   - Heroku (ê°„ë‹¨í•œ ë°°í¬)

3. ë°ì´í„°ë² ì´ìŠ¤
   - AWS RDS (PostgreSQL)
   - Supabase (PostgreSQL)

4. ìºì‹œ/ì„¸ì…˜
   - AWS ElastiCache (Redis)
   - Redis Cloud

5. íŒŒì¼ ì €ì¥ì†Œ
   - AWS S3
   - Cloudflare R2


ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„
============

1. ë°±ì—”ë“œ ê°œë°œ í™˜ê²½ ì„¤ì •
   â–¡ Node.js ì„¤ì¹˜
   â–¡ PostgreSQL ì„¤ì¹˜
   â–¡ Redis ì„¤ì¹˜
   â–¡ í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±

2. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„
   â–¡ ìŠ¤í‚¤ë§ˆ ì •ì˜
   â–¡ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‘ì„±
   â–¡ ì´ˆê¸° ë°ì´í„° Seed

3. API ê°œë°œ
   â–¡ ì¸ì¦ API êµ¬í˜„
   â–¡ ì‚¬ìš©ì API êµ¬í˜„
   â–¡ ì†Œì‹ API êµ¬í˜„
   â–¡ ì»¤ë®¤ë‹ˆí‹° API êµ¬í˜„

4. í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™
   â–¡ API í´ë¼ì´ì–¸íŠ¸ ì‘ì„±
   â–¡ ê° í˜ì´ì§€ì— API í˜¸ì¶œ ì¶”ê°€
   â–¡ ì¸ì¦ ìƒíƒœ ê´€ë¦¬

5. í…ŒìŠ¤íŠ¸ ë° ë°°í¬
   â–¡ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
   â–¡ í†µí•© í…ŒìŠ¤íŠ¸
   â–¡ ë°°í¬ í™˜ê²½ ì„¤ì •